<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Protected Document Viewer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, sans-serif;
        background: #525252;
        min-height: 100vh;
      }

      /* Login Screen */
      .login-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #fafafa 0%, #f1f1f1 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        padding: 20px;
      }

      .login-container {
        background: white;
        border-radius: 16px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        padding: 60px 40px;
        max-width: 450px;
        width: 100%;
        text-align: center;
      }

      .lock-icon {
        width: 120px;
        height: 120px;
        margin: 0 auto 30px;
      }

      .lock-icon img {
        width: 100%;
        height: 100%;
        object-fit: contain;
      }

      h1 {
        color: #2d3748;
        font-size: 24px;
        margin-bottom: 12px;
        font-weight: 700;
      }

      .subtitle {
        color: #718096;
        margin-bottom: 40px;
        font-size: 15px;
      }

      .input-group {
        position: relative;
        margin-bottom: 24px;
      }

      input[type="password"] {
        width: 100%;
        padding: 16px 20px;
        border: 2px solid #e2e8f0;
        border-radius: 10px;
        font-size: 16px;
        transition: all 0.3s ease;
        outline: none;
      }

      input[type="password"]:focus {
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      button {
        width: 100%;
        padding: 16px;
        background: linear-gradient(135deg, #353538 0%, #1b181e 100%);
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      button:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
      }

      button:active {
        transform: translateY(0);
      }

      .error-message {
        background: #fee;
        color: #c53030;
        padding: 12px 16px;
        border-radius: 8px;
        margin-top: 16px;
        font-size: 14px;
        display: none;
      }

      .error-message.show {
        display: block;
      }

      /* File Selection Screen */
      .file-selection {
        display: none;
        min-height: 100vh;
        background: linear-gradient(135deg, #fafafa 0%, #f1f1f1 100%);
        color: #131212;
        padding: 60px 20px;
        text-align: center;
      }

      .file-selection h2 {
        font-size: 28px;
        margin-bottom: 30px;
      }

      .file-list {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        grid-template-rows: repeat(4, 200px);
        gap: 1.5rem;
        padding: 2rem;
        justify-items: center;
        align-items: center;
      }

      .file-item {
        width: 100%;
        height: 100%;
        background: white;
        border-radius: 12px;
        padding: 1rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        font-weight: 500;
        transition: all 0.2s;
      }

      .file-card {
        background: #1b181e0d;
        border-radius: 12px;
        padding: 20px;
        width: 220px;
        transition: all 0.3s ease;
        text-align: center;
      }

      .file-card:hover {
        background: #ececec;
        transform: translateY(-4px);
      }

      .file-card h3 {
        font-size: 18px;
        margin-bottom: 8px;
      }

      .file-card p {
        font-size: 14px;
        color: #333;
        margin-bottom: 12px;
      }

      .link-btn {
        display: inline-block;
        margin-top: 6px;
        padding: 8px 12px;
        background: #353538;
        color: white;
        border-radius: 6px;
        font-size: 13px;
        text-decoration: none;
        transition: all 0.2s ease;
      }

      .link-btn:hover {
        background: #1b181e;
      }

      /* Viewer */
      .viewer-wrapper {
        display: none;
        min-height: 100vh;
      }

      .viewer-header {
        position: sticky;
        top: 0;
        background: #2d3748;
        color: white;
        padding: 16px 24px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 12px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      }

      .viewer-title {
        font-size: 18px;
        font-weight: 600;
      }

      .controls {
        display: flex;
        gap: 8px;
        align-items: center;
        flex-wrap: wrap;
      }

      .control-btn {
        padding: 6px 10px;
        background: #4a5568;
        border: none;
        color: white;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        width: auto;
      }

      .control-btn:hover {
        background: #5a6778;
      }

      .exit-btn {
        background: #e53e3e;
      }

      .exit-btn:hover {
        background: #c53030;
      }

      .pdf-container {
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
        background: #525252;
      }

      .pdf-page {
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        background: white;
      }

      .footer {
        background: #2d3748;
        padding: 16px 24px;
        text-align: center;
        color: #a0aec0;
        font-size: 13px;
      }
    </style>
  </head>
  <body>
    <!-- Login -->
    <div id="login" class="login-overlay">
      <div class="login-container">
        <div class="lock-icon">
          <img
            src="https://mevrik-cloud.mevrik.com/apps_15/LB6WV-15_8DXT_mevrik-logo-1-.png"
            alt="Mevrik Logo"
          />
        </div>
        <h1>Mevrik R&D and Innovation Lab</h1>
        <!-- <p class="subtitle">Please enter the password to view documents</p> -->
        <form id="password-form">
          <div class="input-group">
            <input
              type="password"
              id="password-input"
              placeholder="Enter password"
              autocomplete="off"
              required
            />
          </div>
          <button type="submit">Unlock</button>
          <div id="error-message" class="error-message"></div>
        </form>
      </div>
    </div>

    <!-- File Selection -->
    <div id="file-selection" class="file-selection">
      <img width="150" height="75"  "src="https://cdn.prod.website-files.com/62b2bfb8066ae01a203984c0/653dce99bdd0b1ea6c0d0c15_Type%3DLogo%2C%20Size%3D200%2C%20Color%3DPurple%20BG.svg"
            alt="Mevrik Logo"
          />
      <br>
      <h2>Mevrik R&D and Innovation Document</h2>
      <br>
      <div class="file-list" id="file-list"></div>
    </div>

    <!-- Viewer -->
    <div id="viewer" class="viewer-wrapper">
      <div class="viewer-header">
        <div class="viewer-title" id="viewer-title">üìÑ Mevrik Viewer</div>
        <div class="controls">
          
          <span class="page-info">
            Page <span id="current-page">1</span> of
            <span id="total-pages">-</span>
          </span>
          <button class="control-btn" id="zoom-out">Zoom ‚àí</button>
          <button class="control-btn" id="zoom-in">Zoom +</button>
          <button class="control-btn" id="fit-width">Fit Width</button>
          <button class="control-btn exit-btn" id="exit-btn">Exit</button>
        </div>
      </div>
      <div id="pdf-container" class="pdf-container"></div>
      <div class="footer">üîê Protected Document Viewer ‚Äî ¬© Mevrik</div>
    </div>

    <script>
      const CONFIG = {
        correctPasswordHash:
          "18be59f72c23c94957077bd3d1ca4e05ddd4d89459fa6123809c64c70c4371fa",
        files: [
          {
            name: "R&D Document on Mevrik Unified CX AI Platform",
            file: "Mevrik-R&D-Document-on-Unified-CX-AI.pdf.enc",
          },
          {
            name: "R&D Document on Generative AI Implementation",
            file: "Mevrik-R&D-Document-on-Genrative-AI-Implementaion.pdf.enc",
          },
          {
            name: "R&D Document on Agentic CX AI Implementaion",
            file: "Mevrik-R&D-Document-on-Agentic-CX-AI-Implementaion.pdf.enc",
          },
          {
            name:"SRS on Unified CX - AI Chatbot",
            file:"srs-chatbot.pdf.enc",
          },
          {
            name:"SRS on Unified CX - Live Chat",
            file:"srs-lc.pdf.enc",
          },
          {
            name:"SRS on Unified CX - Email",
            file:"srs-email.pdf.enc",
          },
          {
            name:"SRS on Unified CX - Social",
            file:"srs-sm.pdf.enc",
          },
          {
            name:"FRS on Unified CX - AI Chatbot",
            file:"frs-chatbot.pdf.enc",
          },
          {
            name:"FRS on Unified CX - Live Chat",
            file:"frs-lc.pdf.enc",
          },
          {
            name:"FRS on Unified CX - Email",
            file:"frs-email.pdf.enc",
          },
          {
            name:"FRS on Unified CX - Social",
            file:"frs-sm.pdf.enc",
          },
          
          
        ],
      };

      pdfjsLib.GlobalWorkerOptions.workerSrc =
        "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";

      let pdfDoc = null;
      let scale = 1.5;
      let password = "";

      const loginScreen = document.getElementById("login");
      const fileSelection = document.getElementById("file-selection");
      const viewerScreen = document.getElementById("viewer");
      const pdfContainer = document.getElementById("pdf-container");
      const errorMessage = document.getElementById("error-message");

      function hashPassword(password) {
        return CryptoJS.SHA256(password).toString();
      }

      function showError(message) {
        errorMessage.textContent = message;
        errorMessage.classList.add("show");
        setTimeout(() => errorMessage.classList.remove("show"), 3000);
      }

      function showFileList() {
        loginScreen.style.display = "none";
        fileSelection.style.display = "block";
        const list = document.getElementById("file-list");
        list.innerHTML = "";
        CONFIG.files.forEach((f) => {
          const div = document.createElement("div");
          div.className = "file-card";
          if (f.href) {
            div.innerHTML = `
              <h3>${f.name}</h3>
              <p>External Link</p>
              <a href="${f.href}" target="_blank" class="link-btn">Open Link</a>
            `;
          } else {
            div.innerHTML = `
              <h3>${f.name}</h3>
              <p>Encrypted PDF</p>
              <button class="link-btn">View</button>
            `;
            div.querySelector("button").addEventListener("click", () => loadPDF(f));
          }
          list.appendChild(div);
        });
      }

      async function loadPDF(fileInfo) {
        fileSelection.style.display = "none";
        viewerScreen.style.display = "block";
        pdfContainer.innerHTML = "Loading...";
        try {
          const res = await fetch(fileInfo.file);
          if (!res.ok) throw new Error("File not found");
          const encrypted = await res.text();
          const decrypted = CryptoJS.AES.decrypt(encrypted, password).toString(
            CryptoJS.enc.Utf8
          );
          if (!decrypted) throw new Error("Decryption failed");

          const binary = atob(decrypted);
          const bytes = new Uint8Array(binary.length);
          for (let i = 0; i < binary.length; i++) bytes[i] = binary.charCodeAt(i);

          pdfDoc = await pdfjsLib.getDocument({ data: bytes }).promise;
          document.getElementById("total-pages").textContent = pdfDoc.numPages;
          document.getElementById("viewer-title").textContent =
            "üìÑ " + fileInfo.name;
          renderAllPages();
        } catch (err) {
          console.error(err);
          showError("Failed to load or decrypt the file.");
          fileSelection.style.display = "block";
          viewerScreen.style.display = "none";
        }
      }

      async function renderAllPages() {
        pdfContainer.innerHTML = "";
        for (let i = 1; i <= pdfDoc.numPages; i++) {
          const page = await pdfDoc.getPage(i);
          const viewport = page.getViewport({ scale });
          const canvas = document.createElement("canvas");
          canvas.className = "pdf-page";
          const ctx = canvas.getContext("2d");
          canvas.height = viewport.height;
          canvas.width = viewport.width;
          await page.render({ canvasContext: ctx, viewport }).promise;
          pdfContainer.appendChild(canvas);
        }
      }

      document
        .getElementById("password-form")
        .addEventListener("submit", (e) => {
          e.preventDefault();
          const input = document.getElementById("password-input").value;
          const hash = hashPassword(input);
          if (hash === CONFIG.correctPasswordHash) {
            password = input;
            showFileList();
          } else {
            showError("Incorrect password.");
          }
        });

      document.getElementById("zoom-in").addEventListener("click", () => {
        scale += 0.2;
        renderAllPages();
      });

      document.getElementById("zoom-out").addEventListener("click", () => {
        scale = Math.max(0.5, scale - 0.2);
        renderAllPages();
      });

      document.getElementById("fit-width").addEventListener("click", async () => {
        const containerWidth = pdfContainer.offsetWidth - 40;
        const page = await pdfDoc.getPage(1);
        const viewport = page.getViewport({ scale: 1 });
        scale = containerWidth / viewport.width;
        renderAllPages();
      });

      document.getElementById("exit-btn").addEventListener("click", () => {
        viewerScreen.style.display = "none";
        fileSelection.style.display = "block";
      });
    </script>
  </body>
</html>
